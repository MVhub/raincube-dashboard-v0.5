!function(){function n(n,e){n.when("/",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/profile",{templateUrl:"/profile/profile.view.html",controller:"profileCtrl",controllerAs:"vm"}).when("/auth/facebook",{redirectTo:function(){return"/auth/facebook"}}).when("/fb/:token",{templateUrl:"/dashboard/dashboard.view.html",controller:"facebookLoginCtrl",controllerAs:"vm"}).when("/dashboard",{templateUrl:"/dashboard/dashboard.view.html",controller:"dashboardCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}function e(n,e,t){n.$on("$routeChangeStart",function(n,o,r){"/profile"!==e.path()||t.isLoggedIn()||e.path("/"),"/dashboard"!==e.path()||t.isLoggedIn()||e.path("/")})}angular.module("raincubeApp",["ngRoute","ngAnimate","ngSanitize","ui.bootstrap","chart.js"]),angular.module("raincubeApp").config(["$routeProvider","$locationProvider",n]).run(["$rootScope","$location","authentication",e])}(),function(){function n(n,e,t,o,r){function i(n){var e=new Array(7);return e[0]="SUN",e[1]="MON",e[2]="TUE",e[3]="WED",e[4]="THU",e[5]="FRI",e[6]="SAT",e[n]}function a(n){n.forEach(function(n,e){var t={iconName:c(n.icon).name,icon:c(n.icon).icon,day:i(new Date(1e3*n.time).getDay()),rainProbability:Math.floor(100*n.precipProbability),rainIntensity:(24*n.precipIntensityMax).toFixed(2),rainIntensityHeight:l((24*n.precipIntensityMax).toFixed(2)).height,rainIntensityWidth:l((24*n.precipIntensityMax).toFixed(2)).width};s.forecasts.push(t)})}function c(n){switch(n){case"rain":case"snow":case"sleet":return{icon:u.rain,name:"RAINY"};case"cloudy":case"fog":case"partly-cloudy-day":case"partly-cloudy-night":return{icon:u.overcast,name:"CLOUDY"};case"clear-day":case"clear-night":return{icon:u.sunny,name:"SUNNY"};case"wind":return{icon:u.windy,name:"WINDY"};case"thunderstorm":return{icon:u.lightning,name:"STORMY"};default:return{icon:u.sunny,name:"SUNNY"}}}function l(n){switch(!0){case 0==n:return{height:"1px",width:"1px"};case n<.25:return{height:"5px",width:"5px"};case n<.5:return{height:"10px",width:"10px"};case n<1:return{height:"15px",width:"15px"};case n>=1:return{height:"20px",width:"20px"};default:return{height:"5px",width:"5px"}}}var s=this,u={rain:"./images/rc_raining.svg",heavyRain:"./images/rc_heavy_rain.svg",lightning:"./images/rc_lightning.svg",overcast:"./images/rc_overcast.svg",sunny:"./images/rc_sunny.svg",windy:"./images/rc_windy.svg"};s.waterLevel=87,s.forecasts=[],s.timeLengths=[],s.timeInterval=[10,15,20,25,30,35,40,45,50,55,60],s.zones=[{zoneNumber:1,title:"ZONE 1",countdownInSeconds:0,countdownInMinutes:0},{zoneNumber:2,title:"ZONE 2",countdownInSeconds:0,countdownInMinutes:0},{zoneNumber:3,title:"ZONE 3",countdownInSeconds:0,countdownInMinutes:0}],s.setTime=function(n,e){s.timeLengths[n]=e};var h=[];s.startCountdown=function(n){var t=60*s.timeLengths[n];r.openChannel(n).success(function(o){h[n-1]=e(function(){t--,s.zones[n-1].countdownInSeconds=Math.floor(t%60),s.zones[n-1].countdownInMinutes=Math.floor(t/60%60),t<=0&&s.stopCountdown(h[n-1])},1e3)}).error(function(n){console.log(n)})},s.stopCountdown=function(n){r.closeChannel(n).success(function(t){angular.isDefined(h[n-1])&&(e.cancel(h[n-1]),h[n-1]=void 0)}).error(function(n){console.log(n)})},s.labels=["JUL","AUG","SEP","OCT","NOV","DEC"],s.series=["GALLONS COLLECTED","Zone 1","Zone 2","Zone 3"],s.chartData=[[150,167,148,137,120,92],[36,33,25,85,120,132],[71,69,76,94,115,125],[63,82,76,89,103,112]],s.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"},{yAxisID:"y-axis-3"},{yAxisID:"y-axis-4"}],s.chartOptions={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left"},{id:"y-axis-2",type:"linear",display:!1,position:"left"},{id:"y-axis-3",type:"linear",display:!1,position:"left"},{id:"y-axis-4",type:"linear",display:!1,position:"left"}]}};var g=0,d=e(function(){g++,s.waterLevel=g,s.transformWaterLevel="translate(0,"+(100-g)+"%)",87===g&&e.cancel(d)},60);o.getForecast("33569").success(function(n){a(n.daily.data)}).error(function(n){console.log(n)})}angular.module("raincubeApp").controller("dashboardCtrl",n),n.$inject=["$scope","$interval","$location","weather","awsIot"]}(),function(){function n(){console.log("Home controller is running")}angular.module("raincubeApp").controller("homeCtrl",n)}(),function(){function n(n,e,t){var o=this;o.user={},o.currentUser=t.currentUser(),e.getProfile().success(function(n){console.log(n),o.user=n,o.user.fullName=o.user.firstName+" "+o.user.lastName}).error(function(n){console.log(n)})}angular.module("raincubeApp").controller("profileCtrl",n),n.$inject=["$location","meanData","authentication"]}(),function(){function n(n,e,t){var o=function(n){e.localStorage["mean-token"]=n},r=function(){return e.localStorage["mean-token"]},i=function(){var n,t=r();return!!t&&(n=t.split(".")[1],n=e.atob(n),n=JSON.parse(n),n.exp>Date.now()/1e3)},a=function(){if(i()){var n=r(),t=n.split(".")[1];return t=e.atob(t),t=JSON.parse(t),{email:t.email,firstName:t.firstName,lastName:t.lastName}}};return register=function(e){return n.post("/register",e).success(function(n){o(n.token)})},login=function(e){return n.post("/login",e).success(function(n){o(n.token)})},logout=function(){e.localStorage.removeItem("mean-token"),t.path("/")},{currentUser:a,saveToken:o,getToken:r,isLoggedIn:i,register:register,login:login,logout:logout}}angular.module("raincubeApp").service("authentication",n),n.$inject=["$http","$window","$location"]}(),function(){function n(n){return openChannel=function(e){return n.get("/openChannel/"+e,{headers:{Authorization:"JWT "+authentication.getToken()}})},closeChannel=function(e){return n.get("/closeChannel/"+e,{headers:{Authorization:"JWT "+authentication.getToken()}})},{openChannel:openChannel,closeChannel:closeChannel}}angular.module("raincubeApp").service("awsIot",n),n.$inject=["$http"]}(),function(){function n(n,e){var t=function(){return n.get("/userProfile",{headers:{Authorization:"JWT "+e.getToken()}})};return{getProfile:t}}angular.module("raincubeApp").service("meanData",n),n.$inject=["$http","authentication"]}(),function(){function n(n,e){return getForecast=function(t){return n.get("/forecast/"+t,{headers:{Authorization:"JWT "+e.getToken()}})},{getForecast:getForecast}}angular.module("raincubeApp").service("weather",n),n.$inject=["$http","authentication"]}(),function(){function n(n,e){var t=this;t.credentials={firstName:"",lastName:"",email:"",password:""},t.onSubmit=function(){e.register(t.credentials).error(function(n){alert(n)}).then(function(){n.path("profile")})}}angular.module("raincubeApp").controller("registerCtrl",n),n.$inject=["$location","authentication"]}(),function(){function n(n,e,t){t.saveToken(e.token),n.path("dashboard")}angular.module("raincubeApp").controller("facebookLoginCtrl",n),n.$inject=["$location","$routeParams","authentication"]}(),function(){function n(n,e){var t=this;t.credentials={email:"",password:""},t.onSubmit=function(){e.login(t.credentials).error(function(n){alert(n)}).then(function(){n.path("dashboard")})}}angular.module("raincubeApp").controller("loginCtrl",n),n.$inject=["$location","authentication"]}(),function(){function n(n,e){var t=this;t.isLoggedIn=e.isLoggedIn(),t.currentUser=e.currentUser(),t.currentUser&&(t.currentUser.fullname=t.currentUser.firstName+" "+t.currentUser.lastName),t.logout=function(){e.logout()}}angular.module("raincubeApp").controller("navigationCtrl",n),n.$inject=["$location","authentication"]}(),function(){function n(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("raincubeApp").directive("navigation",n)}();
//# sourceMappingURL=app.min.js.map
